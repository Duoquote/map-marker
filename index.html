<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>
	<style type="text/css">
	@import url('https://fonts.googleapis.com/css?family=Exo+2');
		html, body {
			height: 100%;
			padding: 0;
			margin: 0;
		}
		#map {
			left: 0;
			height: 100%;
			width: 80%;
			position: fixed;
		}
		#map:hover {
			cursor: crosshair;
		}
		#panel {
			background-color: #131f23;
			right: 0;
			height: 100%;
			width: 20%;
			display: block;
			position: fixed;
			z-index: 50;
			box-shadow: -2px 0px 15px #25252587;
		}
	</style>
</head>
<body>
<div id="map"></div>
<div id="panel">
	<div style="padding: 20px; height: calc(100% - 60px); width: calc(100% - 40px);">
		<h3 style="text-align: center; height: 35px; margin: 0; color: white; font-family: 'Exo 2', sans-serif;">Pin A Location</h3>
		<textarea id="generated-text" style="width: 100%; height: calc(100% - 35px); resize: none; overflow:hidden; padding: 0; border: 0; border-radius: 5px;"></textarea>
		<div style=" font-size: 20px; width: max-content; margin: auto; height: 20px; color: #fff; font-family: 'Exo 2', sans-serif;"><input style="margin: 3.5px 10px 3.5px 10px;" type="checkbox" checked onclick="if(this.checked){changeSet('rmOld', 1)}else{changeSet('rmOld', 0)}">Delete Prev</div>
	</div>
</div>
</body>
<script type="text/javascript">
	var generalSettings = {"rmOld": 1};
	function changeSet(key, value) {
		generalSettings[key] = value
	}
	console.log(generalSettings)
	var map = L.map('map').setView([39.21523130910493, 35.18051797397777], 6);

	L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
		attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
	}).addTo(map);
	map.on("click", function(e){
		console.log(e.latlng);
		pin(e.latlng["lat"], e.latlng["lng"], map);
		addCord(e.latlng);
	})
	function pin(inlat, inlong, inmap){
		var mark = L.marker([inlat, inlong]).addTo(inmap);
		mark.bindTooltip(String(inlat)+String(inlong)).openTooltip();
		if (generalSettings["rmOld"] == 1) {
			setTimeout(function(){
				mark.remove()
			}, 5000);
		}
	}
	function initList(){
		document.getElementById("generated-text").value = "[]"
	}
	initList();
	function addCord(inp){
		var current = document.getElementById("generated-text").value;
		if (current == "[]") {
			current = "[["+String(inp["lat"])+", "+String(inp["lng"])+"]]"
		} else {
			current = current.slice(0, -1)+",["+String(inp["lat"])+", "+String(inp["lng"])+"]]"
		}
		document.getElementById("generated-text").value = current
	}
</script>
</html>